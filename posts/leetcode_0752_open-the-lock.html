
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://tofucode.com/theme/stylesheet/style.min.css">


    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
          href="https://tofucode.com/theme/pygments/monokai.min.css">

    <script src="https://tofucode.com/theme/tipuesearch/jquery.min.js"></script>
    <script src="https://tofucode.com/theme/tipuesearch/tipuesearch.min.js"></script>
    <script src="https://tofucode.com/theme/tipuesearch/tipuesearch.min.js"></script>
    <script src="https://tofucode.com/theme/tipuesearch/tipuesearch_set.min.js"></script>
    <script src="https://tofucode.com/tipuesearch_content.js"></script>
    <link rel="stylesheet" href="https://tofucode.com/theme/tipuesearch/tipuesearch.min.css" />

  <link rel="stylesheet" type="text/css" href="https://tofucode.com/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="https://tofucode.com/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="https://tofucode.com/theme/font-awesome/css/solid.css">


    <link href="https://tofucode.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="TofuCode Atom">



<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'G-DCBDZPQQD1', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->  


<meta name="author" content="Zeph" />
<meta name="description" content="Question Link : https://leetcode.com/problems/open-the-lock/ Difficulty: Medium Premium: False Question You have a lock in front of you with 4 circular wheels. Each wheel has 10 slots: &#39;0&#39;, &#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;, &#39;5&#39;, &#39;6&#39;, &#39;7&#39;, &#39;8&#39;, &#39;9&#39;. The wheels can rotate freely and wrap around: for example we …" />
<meta name="keywords" content="bfs">


<meta property="og:site_name" content="TofuCode"/>
<meta property="og:title" content="Leetcode 0752. Open the Lock"/>
<meta property="og:description" content="Question Link : https://leetcode.com/problems/open-the-lock/ Difficulty: Medium Premium: False Question You have a lock in front of you with 4 circular wheels. Each wheel has 10 slots: &#39;0&#39;, &#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;, &#39;5&#39;, &#39;6&#39;, &#39;7&#39;, &#39;8&#39;, &#39;9&#39;. The wheels can rotate freely and wrap around: for example we …"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="https://tofucode.com/posts/leetcode_0752_open-the-lock.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2025-02-06 00:00:00-08:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="https://tofucode.com/author/zeph.html">
<meta property="article:section" content="Leetcode"/>
<meta property="article:tag" content="bfs"/>
<meta property="og:image" content="">

  <title>TofuCode &ndash; Leetcode 0752. Open the Lock</title>

</head>
<body class="light-theme">
  <aside>
    <div>
      <a href="https://tofucode.com">
        <img src="https://tofucode.com/theme/img/profile.png" alt="TofuCode" title="TofuCode">
      </a>

      <h1>
        <a href="https://tofucode.com">TofuCode</a>
      </h1>

      
      <ul class="list social">
      </ul>

        <form class="navbar-search" action="/search.html" role="search">
          <input type="text" name="q" id="tipue_search_input" placeholder="Search...">
        </form>

      <nav>
        <ul class="list">



            <li>
              <a target="_self" href="/pages/interview-questions.html" >Interview Questions</a>
            </li>
            <li>
              <a target="_self" href="/category/leetcode.html" >Recent Questions</a>
            </li>
            <li>
              <a target="_self" href="/tags.html" >Tags</a>
            </li>
        </ul>
      </nav>

    </div>

  </aside>
  <main>


<article class="single">
  <header>
      
    <h1 id="leetcode_0752_open-the-lock">Leetcode 0752. Open the Lock</h1>
    <p>
      Posted on Thu 06 February 2025 in <a href="https://tofucode.com/category/leetcode.html">Leetcode</a>

    </p>
  </header>


  <div>
    <p>Question Link : <a href="https://leetcode.com/problems/open-the-lock/">https://leetcode.com/problems/open-the-lock/</a></p>
<p>Difficulty: Medium</p>
<p>Premium: False</p>
<h3>Question</h3>
<p>You have a lock in front of you with 4 circular wheels. Each wheel has 10 slots: '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'. The wheels can rotate freely and wrap around: for example we can turn '9' to be '0', or '0' to be '9'. Each move consists of turning one wheel one slot.
The lock initially starts at '0000', a string representing the state of the 4 wheels.
You are given a list of deadends dead ends, meaning if the lock displays any of these codes, the wheels of the lock will stop turning and you will be unable to open it.
Given a target representing the value of the wheels that will unlock the lock, return the minimum total number of turns required to open the lock, or -1 if it is impossible.
 
Example 1:</p>
<p>Input: deadends = ["0201","0101","0102","1212","2002"], target = "0202"
Output: 6
Explanation: 
A sequence of valid moves would be "0000" -&gt; "1000" -&gt; "1100" -&gt; "1200" -&gt; "1201" -&gt; "1202" -&gt; "0202".
Note that a sequence like "0000" -&gt; "0001" -&gt; "0002" -&gt; "0102" -&gt; "0202" would be invalid,
because the wheels of the lock become stuck after the display becomes the dead end "0102".</p>
<p>Example 2:</p>
<p>Input: deadends = ["8888"], target = "0009"
Output: 1
Explanation: We can turn the last wheel in reverse to move from "0000" -&gt; "0009".</p>
<p>Example 3:</p>
<p>Input: deadends = ["8887","8889","8878","8898","8788","8988","7888","9888"], target = "8888"
Output: -1
Explanation: We cannot reach the target without getting stuck.</p>
<p>Constraints:</p>
<p>1 &lt;= deadends.length &lt;= 500
deadends[i].length == 4
target.length == 4
target will not be in the list deadends.
target and deadends[i] consist of digits only.</p>
<h3>Solution</h3>
<p>Approach each different combination number as a state, and 1 move as a change/edge between two states. We can then use bfs for find the shortest amount of steps from start to the target state while keeping track of the deadends.</p>
<h3>Code</h3>
<div class="highlight"><pre><span></span><code><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">Leetcode 0752. Open the Lock</span>
<span class="sd">Question Link : https://leetcode.com/problems/open-the-lock/</span>
<span class="sd">Solution Link : https://tofucode.com/posts/leetcode_0752_open-the-lock.html</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">openLock</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">deadends</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">target</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &#39;0000&#39; -&gt; target,</span>
<span class="sd">        one move is: one digit plus minus 1</span>
<span class="sd">        get around deadends: check against a set</span>
<span class="sd">        two ways to get to target number each digit</span>

<span class="sd">        0000 -&gt; 0202</span>
<span class="sd">        &quot;0000&quot; -&gt; &quot;1000&quot; -&gt; &quot;1100&quot; -&gt; &quot;1200&quot; -&gt; &quot;1201&quot; -&gt; &quot;1202&quot; -&gt; &quot;0202&quot;</span>

<span class="sd">        bfs starting at 0000</span>
<span class="sd">        at each state: 8 ways forward: plus minus 1 on each digit</span>
<span class="sd">        (steps, state)</span>

<span class="sd">        worst case: all numbers</span>
<span class="sd">        Time : O(10^4)</span>
<span class="sd">        Space: O(10^4)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">blocked</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">deadends</span><span class="p">)</span>

        <span class="n">queue</span> <span class="o">=</span> <span class="n">deque</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;0000&#39;</span><span class="p">)])</span> <span class="c1"># steps, state</span>
        <span class="n">seen</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

        <span class="k">while</span> <span class="n">queue</span><span class="p">:</span>
            <span class="n">step</span><span class="p">,</span> <span class="n">state</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">state</span> <span class="ow">in</span> <span class="n">seen</span> <span class="ow">or</span> <span class="n">state</span> <span class="ow">in</span> <span class="n">blocked</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">state</span> <span class="o">==</span> <span class="n">target</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">step</span>

            <span class="n">seen</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
                <span class="n">digit_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">state</span><span class="p">]</span>
                <span class="n">digit</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">digit_list</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="n">next_digit</span> <span class="o">=</span> <span class="nb">str</span><span class="p">((</span><span class="n">digit</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="mi">9</span><span class="p">)</span>
                <span class="n">prev_digit</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">digit</span> <span class="o">-</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">digit</span> <span class="o">!=</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">9</span><span class="p">)</span>

                <span class="n">digit_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">next_digit</span>
                <span class="n">next_state</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">digit_list</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">next_state</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen</span> <span class="ow">and</span> <span class="n">next_state</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">blocked</span><span class="p">:</span>
                    <span class="n">queue</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">step</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">next_state</span><span class="p">))</span>

                <span class="n">digit_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">prev_digit</span>
                <span class="n">prev_state</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">digit_list</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">prev_state</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen</span> <span class="ow">and</span> <span class="n">prev_state</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">blocked</span><span class="p">:</span>
                    <span class="n">queue</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">step</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">prev_state</span><span class="p">))</span>

        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
</code></pre></div>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="https://tofucode.com/tag/bfs.html">bfs</a>
    </p>
  </div>





</article>

    <footer>
<p> Eat Tofu and be true </p>
<p>&copy; 2025 TofuCode.com</p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " TofuCode ",
  "url" : "https://tofucode.com",
  "image": "",
  "description": ""
}
</script>

    <script>
      $(document).ready(function() {
        $('#tipue_search_input').tipuesearch();
      });
    </script>

</body>
</html>