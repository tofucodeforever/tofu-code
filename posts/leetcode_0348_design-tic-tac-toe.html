
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://tofucode.com/theme/stylesheet/style.min.css">


    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
          href="https://tofucode.com/theme/pygments/monokai.min.css">

    <script src="https://tofucode.com/theme/tipuesearch/jquery.min.js"></script>
    <script src="https://tofucode.com/theme/tipuesearch/tipuesearch.min.js"></script>
    <script src="https://tofucode.com/theme/tipuesearch/tipuesearch.min.js"></script>
    <script src="https://tofucode.com/theme/tipuesearch/tipuesearch_set.min.js"></script>
    <script src="https://tofucode.com/tipuesearch_content.js"></script>
    <link rel="stylesheet" href="https://tofucode.com/theme/tipuesearch/tipuesearch.min.css" />

  <link rel="stylesheet" type="text/css" href="https://tofucode.com/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="https://tofucode.com/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="https://tofucode.com/theme/font-awesome/css/solid.css">


    <link href="https://tofucode.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="TofuCode Atom">



<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'G-DCBDZPQQD1', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->  


<meta name="author" content="Zeph" />
<meta name="description" content="Question Link : https://leetcode.com/problems/design-tic-tac-toe/ Difficulty: Medium Premium: True Question Assume the following rules are for the tic-tac-toe game on an n x n board between two players: A move is guaranteed to be valid and is placed on an empty block. Once a winning condition is reached …" />
<meta name="keywords" content="simulation">


<meta property="og:site_name" content="TofuCode"/>
<meta property="og:title" content="Leetcode 0348. Design Tic-Tac-Toe"/>
<meta property="og:description" content="Question Link : https://leetcode.com/problems/design-tic-tac-toe/ Difficulty: Medium Premium: True Question Assume the following rules are for the tic-tac-toe game on an n x n board between two players: A move is guaranteed to be valid and is placed on an empty block. Once a winning condition is reached …"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="https://tofucode.com/posts/leetcode_0348_design-tic-tac-toe.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2024-12-05 00:00:00-08:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="https://tofucode.com/author/zeph.html">
<meta property="article:section" content="Leetcode Premium"/>
<meta property="article:tag" content="simulation"/>
<meta property="og:image" content="">

  <title>TofuCode &ndash; Leetcode 0348. Design Tic-Tac-Toe</title>

</head>
<body class="light-theme">
  <aside>
    <div>
      <a href="https://tofucode.com">
        <img src="https://tofucode.com/theme/img/profile.png" alt="TofuCode" title="TofuCode">
      </a>

      <h1>
        <a href="https://tofucode.com">TofuCode</a>
      </h1>

      
      <ul class="list social">
      </ul>

        <form class="navbar-search" action="/search.html" role="search">
          <input type="text" name="q" id="tipue_search_input" placeholder="Search...">
        </form>

      <nav>
        <ul class="list">



            <li>
              <a target="_self" href="/pages/interview-questions.html" >Interview Questions</a>
            </li>
            <li>
              <a target="_self" href="/category/leetcode.html" >Recent Questions</a>
            </li>
            <li>
              <a target="_self" href="/tags.html" >Tags</a>
            </li>
        </ul>
      </nav>

    </div>

  </aside>
  <main>


<article class="single">
  <header>
      
    <h1 id="leetcode_0348_design-tic-tac-toe">Leetcode 0348. Design Tic-Tac-Toe</h1>
    <p>
      Posted on Thu 05 December 2024 in <a href="https://tofucode.com/category/leetcode-premium.html">Leetcode Premium</a>

    </p>
  </header>


  <div>
    <p>Question Link : <a href="https://leetcode.com/problems/design-tic-tac-toe/">https://leetcode.com/problems/design-tic-tac-toe/</a></p>
<p>Difficulty: Medium</p>
<p>Premium: True</p>
<h3>Question</h3>
<p>Assume the following rules are for the tic-tac-toe game on an n x n board between two players:</p>
<p>A move is guaranteed to be valid and is placed on an empty block.
Once a winning condition is reached, no more moves are allowed.
A player who succeeds in placing n of their marks in a horizontal, vertical, or diagonal row wins the game.</p>
<p>Implement the TicTacToe class:</p>
<p>TicTacToe(int n) Initializes the object the size of the board n.
int move(int row, int col, int player) Indicates that the player with id player plays at the cell (row, col) of the board. The move is guaranteed to be a valid move, and the two players alternate in making moves. Return</p>
<p>0 if there is no winner after the move,
1 if player 1 is the winner after the move, or
2 if player 2 is the winner after the move.</p>
<p>Example 1:</p>
<p>Input
["TicTacToe", "move", "move", "move", "move", "move", "move", "move"]
[[3], [0, 0, 1], [0, 2, 2], [2, 2, 1], [1, 1, 2], [2, 0, 1], [1, 0, 2], [2, 1, 1]]
Output
[null, 0, 0, 0, 0, 0, 0, 1]</p>
<p>Explanation
TicTacToe ticTacToe = new TicTacToe(3);
Assume that player 1 is "X" and player 2 is "O" in the board.
ticTacToe.move(0, 0, 1); // return 0 (no one wins)
|X| | |
| | | |    // Player 1 makes a move at (0, 0).
| | | |</p>
<p>ticTacToe.move(0, 2, 2); // return 0 (no one wins)
|X| |O|
| | | |    // Player 2 makes a move at (0, 2).
| | | |</p>
<p>ticTacToe.move(2, 2, 1); // return 0 (no one wins)
|X| |O|
| | | |    // Player 1 makes a move at (2, 2).
| | |X|</p>
<p>ticTacToe.move(1, 1, 2); // return 0 (no one wins)
|X| |O|
| |O| |    // Player 2 makes a move at (1, 1).
| | |X|</p>
<p>ticTacToe.move(2, 0, 1); // return 0 (no one wins)
|X| |O|
| |O| |    // Player 1 makes a move at (2, 0).
|X| |X|</p>
<p>ticTacToe.move(1, 0, 2); // return 0 (no one wins)
|X| |O|
|O|O| |    // Player 2 makes a move at (1, 0).
|X| |X|</p>
<p>ticTacToe.move(2, 1, 1); // return 1 (player 1 wins)
|X| |O|
|O|O| |    // Player 1 makes a move at (2, 1).
|X|X|X|</p>
<p>Constraints:</p>
<p>2 &lt;= n &lt;= 100
player is 1 or 2.
0 &lt;= row, col &lt; n
(row, col) are unique for each different call to move.
At most n2 calls will be made to move.</p>
<p>Follow-up: Could you do better than O(n2) per move() operation?</p>
<h3>Solution</h3>
<p>The naive solution is to simulate the board and check all directions for a possible win on a move. To improve on this runtime, we need to identify the fact that we only care about the win condition and that a win is only triggered when the entire row or col or diagonal is the same. With this info, we want to compress the informatineeded to track per win of a single row/col/diagonal to 1d. Namely a count number where we +1 for player 1 and alternatively -1 for player 2. </p>
<h3>Code</h3>
<div class="highlight"><pre><span></span><code><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">Leetcode 0348. Design Tic-Tac-Toe</span>
<span class="sd">Question Link : https://leetcode.com/problems/design-tic-tac-toe/</span>
<span class="sd">Solution Link : https://tofucode.com/posts/leetcode_0348_design-tic-tac-toe.html</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="k">class</span> <span class="nc">TicTacToe</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    2d grid as the board</span>
<span class="sd">    on move() check if the current player is the winner, check:</span>
<span class="sd">        horizontal</span>
<span class="sd">        vertical</span>
<span class="sd">        2 x diangonal</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Space: O(n^2)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">board</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">n</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">col</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">player</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        return</span>
<span class="sd">        0: no winner</span>
<span class="sd">        or 1 or 2</span>

<span class="sd">        diagonal:</span>
<span class="sd">        (1, -1) down, left  - up, right</span>
<span class="sd">        (1, 1) down, right - up, left</span>

<span class="sd">        Time : O(n)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">board</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">player</span>
        <span class="n">direction</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span> <span class="ow">in</span> <span class="n">direction</span><span class="p">:</span>
            <span class="n">won</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">,</span> <span class="n">player</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">won</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">player</span>

        <span class="k">return</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">,</span> <span class="n">player</span><span class="p">):</span>
        <span class="n">count</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="n">x</span> <span class="o">=</span> <span class="n">row</span> <span class="o">+</span> <span class="n">dx</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">col</span> <span class="o">+</span> <span class="n">dy</span>
        <span class="k">while</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="ow">and</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">board</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">!=</span> <span class="n">player</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">x</span> <span class="o">+=</span> <span class="n">dx</span>
            <span class="n">y</span> <span class="o">+=</span> <span class="n">dy</span>

        <span class="n">x</span> <span class="o">=</span> <span class="n">row</span> <span class="o">-</span> <span class="n">dx</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">col</span> <span class="o">-</span> <span class="n">dy</span>
        <span class="k">while</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="ow">and</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">board</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">!=</span> <span class="n">player</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">x</span> <span class="o">-=</span> <span class="n">dx</span>
            <span class="n">y</span> <span class="o">-=</span> <span class="n">dy</span>

        <span class="k">return</span> <span class="n">count</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span>





<span class="c1"># Your TicTacToe object will be instantiated and called as such:</span>
<span class="c1"># obj = TicTacToe(n)</span>
<span class="c1"># param_1 = obj.move(row,col,player)</span>

<span class="k">class</span> <span class="nc">TicTacToeImproved1</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    only care about win conditions</span>

<span class="sd">    Track:</span>
<span class="sd">        row win</span>
<span class="sd">        col win</span>
<span class="sd">        diagonal win 2 ways</span>

<span class="sd">    Track row or col:</span>
<span class="sd">    each row -&gt; +1 if player 1, -1 if player 2</span>
<span class="sd">    each col -&gt; +1 if player 1, -1 if player 2</span>

<span class="sd">    Track diagonal: only two ways of winner</span>
<span class="sd">        down left - up right (0, 2) (1, 1) (2, 0)</span>
<span class="sd">        down right - up left (2, 2) (1, 1) (0, 0)</span>
<span class="sd">    +1 if player 1, -1 if player 2</span>

<span class="sd">    Win when a abs(tracking state) is n</span>
<span class="sd">    positive: player 1 win</span>
<span class="sd">    negative: player 2 win</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Space: O(n)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rows_tracker</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">n</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cols_tracker</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">n</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">diagonal_down_left_tracker</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">diabonal_down_right_tracker</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">col</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">player</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        return</span>
<span class="sd">        0: no winner</span>
<span class="sd">        or 1 or 2</span>

<span class="sd">        Time : O(1)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rows_tracker</span><span class="p">[</span><span class="n">row</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">player</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="o">-</span><span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cols_tracker</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">player</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="o">-</span><span class="mi">1</span>

        <span class="k">if</span> <span class="n">row</span> <span class="o">+</span> <span class="n">col</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">diagonal_down_left_tracker</span> <span class="o">+=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">player</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">if</span> <span class="n">row</span> <span class="o">==</span> <span class="n">col</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">diabonal_down_right_tracker</span> <span class="o">+=</span><span class="mi">1</span> <span class="k">if</span> <span class="n">player</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="o">-</span><span class="mi">1</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rows_tracker</span><span class="p">[</span><span class="n">row</span><span class="p">])</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span>
            <span class="ow">or</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cols_tracker</span><span class="p">[</span><span class="n">col</span><span class="p">])</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span>
            <span class="ow">or</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">diagonal_down_left_tracker</span><span class="p">)</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span>
            <span class="ow">or</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">diabonal_down_right_tracker</span><span class="p">)</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span>
        <span class="p">):</span>
            <span class="k">return</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">player</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="mi">2</span>

        <span class="k">return</span> <span class="mi">0</span>



<span class="c1"># Your TicTacToe object will be instantiated and called as such:</span>
<span class="c1"># obj = TicTacToe(n)</span>
<span class="c1"># param_1 = obj.move(row,col,player)</span>
</code></pre></div>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="https://tofucode.com/tag/simulation.html">simulation</a>
    </p>
  </div>





</article>

    <footer>
<p> Eat Tofu and be true </p>
<p>&copy; 2025 TofuCode.com</p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " TofuCode ",
  "url" : "https://tofucode.com",
  "image": "",
  "description": ""
}
</script>

    <script>
      $(document).ready(function() {
        $('#tipue_search_input').tipuesearch();
      });
    </script>

</body>
</html>