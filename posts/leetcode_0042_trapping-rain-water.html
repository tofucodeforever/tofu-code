
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://tofucode.com/theme/stylesheet/style.min.css">


    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
          href="https://tofucode.com/theme/pygments/monokai.min.css">

    <script src="https://tofucode.com/theme/tipuesearch/jquery.min.js"></script>
    <script src="https://tofucode.com/theme/tipuesearch/tipuesearch.min.js"></script>
    <script src="https://tofucode.com/theme/tipuesearch/tipuesearch.min.js"></script>
    <script src="https://tofucode.com/theme/tipuesearch/tipuesearch_set.min.js"></script>
    <script src="https://tofucode.com/tipuesearch_content.js"></script>
    <link rel="stylesheet" href="https://tofucode.com/theme/tipuesearch/tipuesearch.min.css" />

  <link rel="stylesheet" type="text/css" href="https://tofucode.com/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="https://tofucode.com/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="https://tofucode.com/theme/font-awesome/css/solid.css">


    <link href="https://tofucode.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="TofuCode Atom">



<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'G-DCBDZPQQD1', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->  


<meta name="author" content="Zeph" />
<meta name="description" content="Question Link : https://leetcode.com/problems/trapping-rain-water/ Difficulty: Hard Premium: False Question Given n non-negative integers representing an elevation map where the width of each bar is 1, compute how much water it can trap after raining. Example 1: Input: height = [0,1,0,2,1,0,1,3,2 …" />
<meta name="keywords" content="pointers, reverse-thinking">


<meta property="og:site_name" content="TofuCode"/>
<meta property="og:title" content="Leetcode 0042. Trapping Rain Water"/>
<meta property="og:description" content="Question Link : https://leetcode.com/problems/trapping-rain-water/ Difficulty: Hard Premium: False Question Given n non-negative integers representing an elevation map where the width of each bar is 1, compute how much water it can trap after raining. Example 1: Input: height = [0,1,0,2,1,0,1,3,2 …"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="https://tofucode.com/posts/leetcode_0042_trapping-rain-water.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2025-01-19 00:00:00-08:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="https://tofucode.com/author/zeph.html">
<meta property="article:section" content="Leetcode"/>
<meta property="article:tag" content="pointers"/>
<meta property="article:tag" content="reverse-thinking"/>
<meta property="og:image" content="">

  <title>TofuCode &ndash; Leetcode 0042. Trapping Rain Water</title>

</head>
<body class="light-theme">
  <aside>
    <div>
      <a href="https://tofucode.com">
        <img src="https://tofucode.com/theme/img/profile.png" alt="TofuCode" title="TofuCode">
      </a>

      <h1>
        <a href="https://tofucode.com">TofuCode</a>
      </h1>

      
      <ul class="list social">
      </ul>

        <form class="navbar-search" action="/search.html" role="search">
          <input type="text" name="q" id="tipue_search_input" placeholder="Search...">
        </form>

      <nav>
        <ul class="list">



            <li>
              <a target="_self" href="/pages/interview-questions.html" >Interview Questions</a>
            </li>
            <li>
              <a target="_self" href="/category/leetcode.html" >Recent Questions</a>
            </li>
            <li>
              <a target="_self" href="/tags.html" >Tags</a>
            </li>
        </ul>
      </nav>

    </div>

  </aside>
  <main>


<article class="single">
  <header>
      
    <h1 id="leetcode_0042_trapping-rain-water">Leetcode 0042. Trapping Rain Water</h1>
    <p>
      Posted on Sun 19 January 2025 in <a href="https://tofucode.com/category/leetcode.html">Leetcode</a>

    </p>
  </header>


  <div>
    <p>Question Link : <a href="https://leetcode.com/problems/trapping-rain-water/">https://leetcode.com/problems/trapping-rain-water/</a></p>
<p>Difficulty: Hard</p>
<p>Premium: False</p>
<h3>Question</h3>
<p>Given n non-negative integers representing an elevation map where the width of each bar is 1, compute how much water it can trap after raining.
 
Example 1:</p>
<p>Input: height = [0,1,0,2,1,0,1,3,2,1,2,1]
Output: 6
Explanation: The above elevation map (black section) is represented by array [0,1,0,2,1,0,1,3,2,1,2,1]. In this case, 6 units of rain water (blue section) are being trapped.</p>
<p>Example 2:</p>
<p>Input: height = [4,2,0,3,2,5]
Output: 9</p>
<p>Constraints:</p>
<p>n == height.length
1 &lt;= n &lt;= 2 * 104
0 &lt;= height[i] &lt;= 105</p>
<h3>Solution</h3>
<p>Walk through one example and try to see how this would be manually solved, then indentify that trapped water are bound by heights on both sides. If we can fix one side (a global max), we can tranverse towards this global max to find trapped water. The total result would need to be done from both left and right sides. </p>
<h3>Code</h3>
<div class="highlight"><pre><span></span><code><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">Leetcode 0042. Trapping Rain Water</span>
<span class="sd">Question Link : https://leetcode.com/problems/trapping-rain-water/</span>
<span class="sd">Solution Link : https://tofucode.com/posts/leetcode_0042_trapping-rain-water.html</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">trap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        [4,2,0,3,2,5]</span>
<span class="sd">           2 4 1 2</span>
<span class="sd">        water height as 4, total 9</span>

<span class="sd">        Split by a global max height:</span>
<span class="sd">        find global max height 5</span>
<span class="sd">        track last seen max height from l to r: 4 bound by min(4, 5)</span>
<span class="sd">        result += bound - current height</span>
<span class="sd">        pass x 2 from both direction</span>

<span class="sd">        Time : O(n)</span>
<span class="sd">        Space: O(n)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">max_idx</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">height</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">height</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">height</span><span class="p">[</span><span class="n">max_idx</span><span class="p">]:</span>
                <span class="n">max_idx</span> <span class="o">=</span> <span class="n">i</span>

        <span class="n">l_to_r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getWater</span><span class="p">(</span><span class="n">height</span><span class="p">[:</span><span class="n">max_idx</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">r_to_l</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getWater</span><span class="p">(</span><span class="n">height</span><span class="p">[</span><span class="n">max_idx</span><span class="p">:][::</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">l_to_r</span> <span class="o">+</span> <span class="n">r_to_l</span>

    <span class="k">def</span> <span class="nf">getWater</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        return water of one pass from left to right</span>
<span class="sd">        assume there is a global max height to the right edge</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">last</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># mark last local max height index</span>
        <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">height</span><span class="p">)):</span>
            <span class="n">h</span> <span class="o">=</span> <span class="n">height</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">h</span> <span class="o">&lt;</span> <span class="n">height</span><span class="p">[</span><span class="n">last</span><span class="p">]:</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="n">height</span><span class="p">[</span><span class="n">last</span><span class="p">]</span> <span class="o">-</span> <span class="n">h</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">last</span> <span class="o">=</span> <span class="n">i</span>

        <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="https://tofucode.com/tag/pointers.html">pointers</a>
      <a href="https://tofucode.com/tag/reverse-thinking.html">reverse-thinking</a>
    </p>
  </div>





</article>

    <footer>
<p> Eat Tofu and be true </p>
<p>&copy; 2025 TofuCode.com</p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " TofuCode ",
  "url" : "https://tofucode.com",
  "image": "",
  "description": ""
}
</script>

    <script>
      $(document).ready(function() {
        $('#tipue_search_input').tipuesearch();
      });
    </script>

</body>
</html>